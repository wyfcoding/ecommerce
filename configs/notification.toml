# 通知服务基础配置
[server.grpc]
# 通知服务主要通过消息队列消费事件，但也可能提供 gRPC 接口用于即时通知
addr = "0.0.0.0"
port = 9095
timeout = "2s"

# 消息队列 (RabbitMQ / Kafka) 配置
# 服务将作为消费者，监听来自其他服务的事件
[mq]
type = "rabbitmq"
url = "amqp://guest:guest@localhost:5672/"
# 定义需要监听的队列和绑定的 exchange
consumer_queues = [
  { queue_name = "user.events.registration", exchange_name = "user_events", routing_key = "user.registered" },
  { queue_name = "order.events.status_change", exchange_name = "order_events", routing_key = "order.*" }, # 监听所有订单状态变化
  { queue_name = "payment.events.success", exchange_name = "payment_events", routing_key = "payment.success" }
]

# 邮件发送通道 (SMTP)
[channels.smtp]
enabled = true
host = "smtp.example.com"
port = 587
username = "your_smtp_username"
password = "your_smtp_password" # 应使用 secrets 管理
from_address = "no-reply@ecommerce.com"
from_name = "E-Commerce Platform"

# 短信发送通道 (Twilio)
[channels.sms.twilio]
enabled = true
account_sid = "ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" # 应使用 secrets 管理
auth_token = "your_twilio_auth_token"      # 应使用 secrets 管理
from_number = "+15017122661"                # Twilio 提供的号码

# 推送通知通道 (Firebase Cloud Messaging)
[channels.push.fcm]
enabled = true
# FCM 服务器密钥或服务账户 JSON 文件的路径
server_key = "your_fcm_server_key" # 应使用 secrets 管理

# 链路追踪配置
[tracing]
jaeger_endpoint = "http://localhost:14268/api/traces"
service_name = "notification-service"

# 日志配置
[log]
level = "debug"
format = "json"
output = "stdout"