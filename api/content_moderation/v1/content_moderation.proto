syntax = "proto3";

package api.content_moderation.v1;

import "google/protobuf/timestamp.proto";
import "google/protobuf/empty.proto";

option go_package = "github.com/wyfcoding/ecommerce/go-api/content_moderation/v1;v1";

// ContentModeration 内容审核服务定义了所有与内容审核相关的RPC接口。
service ContentModeration {
  // --- 核心内容审核接口 ---

  // ModerateText 审核文本内容。
  rpc ModerateText(ModerateTextRequest) returns (ModerateTextResponse);
  // ModerateImage 审核图片内容。
  rpc ModerateImage(ModerateImageRequest) returns (ModerateImageResponse);
}

// --- 消息定义 ---

// ModerateTextRequest 审核文本请求消息。
message ModerateTextRequest {
  string text = 1;
  string content_type = 2; // e.g., "comment", "product_description"
  uint64 user_id = 3;
}

// ModerateTextResponse 审核文本响应消息。
message ModerateTextResponse {
  bool is_safe = 1;
  repeated string moderation_labels = 2;
  optional string rejection_reason = 3;
}

// ModerateImageRequest 审核图片请求消息。
message ModerateImageRequest {
  bytes image_data = 1;
  string content_type = 2; // e.g., "product_image", "user_avatar"
  uint64 user_id = 3;
}

// ModerateImageResponse 审核图片响应消息。
message ModerateImageResponse {
  bool is_safe = 1;
  repeated string moderation_labels = 2;
  optional string rejection_reason = 3;
}