syntax = "proto3";

package api.cms.v1;

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.com/wyfcoding/ecommerce/goapi/cms/v1;v1";

// 内容管理服务，负责页面、文章及商品描述等静态内容的增删改查。
service CMS {
  // 创建新的内容条目。
  rpc CreateContent(CreateContentRequest) returns (ContentResponse);

  // 通过 ID 获取内容详情。
  rpc GetContentByID(GetContentByIDRequest) returns (ContentResponse);

  // 修改已有的内容信息。
  rpc UpdateContent(UpdateContentRequest) returns (ContentResponse);

  // 物理或逻辑移除内容。
  rpc DeleteContent(DeleteContentRequest) returns (google.protobuf.Empty);
}

// 内容详情实体。
message ContentInfo {
  // 系统 ID。
  uint64 content_id = 1;
  // 标题。
  string title = 2;
  // 类别 (ARTICLE, PAGE)。
  string content_type = 3;
  // 负载正文。
  string content_body = 4;
  // 作者名或 ID。
  string author = 5;
  // 创建时间。
  google.protobuf.Timestamp created_at = 6;
  // 最后修改时间。
  google.protobuf.Timestamp updated_at = 7;
}

// 创建请求。
message CreateContentRequest {
  // 标题。
  string title = 1;
  // 分类。
  string content_type = 2;
  // 正文内容。
  string content_body = 3;
  // 作者。
  string author = 4;
}

// 创建响应。
message ContentResponse {
  // 内容详情。
  ContentInfo content = 1;
}

// 查询请求。
message GetContentByIDRequest {
  // 目标 ID。
  uint64 content_id = 1;
}

// 修改请求。
message UpdateContentRequest {
  // 目标 ID。
  uint64 content_id = 1;
  // 修改标题。
  optional string title = 2;
  // 修改分类。
  optional string content_type = 3;
  // 修改正文。
  optional string content_body = 4;
  // 修改作者。
  optional string author = 5;
}

// 删除请求。
message DeleteContentRequest {
  // 目标 ID。
  uint64 content_id = 1;
}
