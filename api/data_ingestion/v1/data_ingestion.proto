syntax = "proto3";

package api.data_ingestion.v1;

import "google/protobuf/timestamp.proto";
import "google/protobuf/empty.proto";

option go_package = "github.com/wyfcoding/ecommerce/go-api/data_ingestion/v1;v1";

// DataIngestion 数据摄取服务定义了所有与数据摄取相关的RPC接口。
service DataIngestion {
  // --- 核心数据摄取接口 ---

  // IngestEvent 摄取一个事件数据点。
  rpc IngestEvent(IngestEventRequest) returns (google.protobuf.Empty);
  // IngestBatch 批量摄取数据。
  rpc IngestBatch(IngestBatchRequest) returns (google.protobuf.Empty);
}

// --- 消息定义 ---

// IngestEventRequest 摄取事件请求消息。
message IngestEventRequest {
  string event_type = 1;
  map<string, string> event_data = 2;
  google.protobuf.Timestamp timestamp = 3;
  optional string source = 4;
}

// IngestBatchRequest 批量摄取请求消息。
message IngestBatchRequest {
  repeated IngestEventRequest events = 1;
}