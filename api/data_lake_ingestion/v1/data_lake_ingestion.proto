syntax = "proto3";

package api.data_lake_ingestion.v1;

import "google/protobuf/timestamp.proto";

option go_package = "ecommerce/api/data_lake_ingestion/v1;v1";

// DataLakeIngestionService 定义了数据湖摄取服务接口
service DataLakeIngestionService {
  // 摄取数据到数据湖
  rpc IngestData(IngestDataRequest) returns (IngestDataResponse);
}

// IngestDataRequest 摄取数据请求
message IngestDataRequest {
  string table_name = 1; // 目标表名 (Hudi表)
  string record_id = 2; // 记录ID (用于Hudi upsert)
  map<string, string> data = 3; // 记录数据
  google.protobuf.Timestamp event_time = 4; // 事件时间
}

// IngestDataResponse 摄取数据响应
message IngestDataResponse {
  bool success = 1;
  string message = 2;
}
