apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "user.fullname" . }}-config
  labels:
    {{- include "user.labels" . | nindent 4 }}
data:
  config.toml: |
    # Service Configuration
    [server.http]
    addr = "0.0.0.0"
    port = {{ .Values.service.httpPort }}
    timeout = "1s"

    [server.grpc]
    addr = "0.0.0.0"
    port = {{ .Values.service.grpcPort }}
    timeout = "1s"

    [data.database]
    driver = "mysql"
    dsn = "root:your_password@tcp({{ .Values.config.database.host }}:{{ .Values.config.database.port }})/ecommerce_user?charset=utf8mb4&parseTime=True&loc=Local"

    [jwt]
    secret = "your-secret-key"
    issuer = "ecommerce-user-service"
    expire_duration = "24h"

    [tracing]
    jaeger_endpoint = "http://jaeger-collector:14268/api/traces"

    [log]
    level = "debug"
    format = "json"
    output = "stdout"
